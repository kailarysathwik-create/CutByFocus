<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Cut By Focus</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    :root {
      --bg: #0e0e0e;
      --text: #ffffff;
      --text-muted: rgba(255,255,255,0.6);
      --accent: #ffb454;
    }

    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
      font-family: Arial, Helvetica, sans-serif;
    }

    body {
      background: var(--bg);
      color: var(--text);
      height: 100vh;
      overflow: hidden;
    }

    .screen {
      display: none;
      height: 100%;
      width: 100%;
      align-items: center;
      justify-content: center;
      text-align: center;
      padding: 1.5rem;
    }

    .screen.active {
      display: flex;
      flex-direction: column;
    }

    h1 {
      font-size: clamp(1.8rem, 5vw, 2.5rem);
      margin-bottom: 1rem;
    }

    p {
      color: var(--text-muted);
      font-size: 0.95rem;
    }

    /* ===== Mood Selection ===== */
    .moods {
      display: flex;
      gap: 1rem;
      margin-top: 2rem;
      flex-wrap: wrap;
      justify-content: center;
    }

    .mood-btn {
      padding: 0.8rem 1.5rem;
      border: 1px solid rgba(255,255,255,0.2);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .mood-btn:hover {
      background: var(--accent);
      color: #000;
    }

    /* ===== Unlock ===== */
    .unlock-ring {
      width: 160px;
      height: 160px;
      border-radius: 50%;
      border: 2px solid var(--accent);
      display: flex;
      align-items: center;
      justify-content: center;
      margin-top: 2rem;
      cursor: pointer;
      user-select: none;
    }

    .unlock-ring span {
      font-size: 0.8rem;
      color: var(--text-muted);
    }

    /* ===== Contact ===== */
    form {
      margin-top: 1.5rem;
      width: 100%;
      max-width: 420px;
    }

    input, select, button {
      width: 100%;
      padding: 0.75rem;
      margin-bottom: 0.75rem;
      background: #151515;
      border: 1px solid rgba(255,255,255,0.2);
      color: var(--text);
    }

    button {
      background: var(--accent);
      color: #000;
      cursor: pointer;
    }

    /* ===== Loading Overlay ===== */
    .send-overlay {
      position: fixed;
      inset: 0;
      background: var(--bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 9999;
      opacity: 0;
      visibility: hidden;
      transition: 0.4s ease;
    }

    .send-overlay.active {
      opacity: 1;
      visibility: visible;
    }

    .spinner {
      width: 55px;
      height: 55px;
      border-radius: 50%;
      border: 2px solid rgba(255,255,255,0.2);
      border-top-color: var(--accent);
      animation: spin 1s linear infinite;
      margin-bottom: 1rem;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    @media (max-width: 480px) {
      body { overflow-y: auto; }
    }
  </style>
</head>

<body>

  <!-- Mood Screen -->
  <div class="screen active" id="moodScreen">
    <h1>Choose the mood</h1>
    <p>This sets the tone.</p>
    <div class="moods">
      <button class="mood-btn" data-mood="calm">Calm</button>
      <button class="mood-btn" data-mood="energetic">Energetic</button>
      <button class="mood-btn" data-mood="cinematic">Cinematic</button>
    </div>
  </div>

  <!-- Unlock Screen -->
  <div class="screen" id="unlockScreen">
    <h1>Align focus</h1>
    <p>Press and hold</p>
    <div class="unlock-ring" id="unlockRing">
      <span>Hold</span>
    </div>
  </div>

  <!-- Contact Screen -->
  <div class="screen" id="contactScreen">
    <h1>Project details</h1>
    <p>I’ll reply personally.</p>

    <form id="projectForm">
      <input name="name" placeholder="Your name" required />
      <input name="projectType" placeholder="Project type" required />
      <input name="videoLength" placeholder="Video length" />
      <input name="deadline" placeholder="Deadline" />
      <select name="budget">
        <option value="">Prefer not to say</option>
        <option value="Discuss with editor">Discuss with editor</option>
        <option value="Under ₹200">Under ₹200</option>
        <option value="₹200 - ₹500">₹200 - ₹500</option>
        <option value="₹500+">₹500+</option>
      </select>
      <button type="submit">Send</button>
    </form>
  </div>

  <!-- Loading Overlay -->
  <div class="send-overlay" id="sendOverlay">
    <div style="text-align:center">
      <div class="spinner"></div>
      <p>Preparing your message…</p>
    </div>
  </div>

  <script>
    const screens = {
      mood: document.getElementById('moodScreen'),
      unlock: document.getElementById('unlockScreen'),
      contact: document.getElementById('contactScreen')
    };

    let selectedMood = 'calm';
    let holdTimer;

    function haptic(p=[10]) {
      if (navigator.vibrate) navigator.vibrate(p);
    }

    function show(screen) {
      Object.values(screens).forEach(s => s.classList.remove('active'));
      screens[screen].classList.add('active');
    }

    function selectMood(mood) {
      selectedMood = mood;
      haptic([8]);
      show('unlock');
    }

    // ✅ Mood button binding (FIXED)
    document.querySelectorAll('.mood-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        selectMood(btn.dataset.mood);
      });
    });

    const ring = document.getElementById('unlockRing');
    ring.addEventListener('mousedown', startHold);
    ring.addEventListener('touchstart', startHold);

    function startHold() {
      haptic([10]);
      holdTimer = setTimeout(() => {
        haptic([20,30,20]);
        show('contact');
      }, 800);
    }

    ring.addEventListener('mouseup', () => clearTimeout(holdTimer));
    ring.addEventListener('mouseleave', () => clearTimeout(holdTimer));
    ring.addEventListener('touchend', () => clearTimeout(holdTimer));

    document.getElementById('projectForm').addEventListener('submit', e => {
      e.preventDefault();
      haptic([15]);

      document.getElementById('sendOverlay').classList.add('active');

      const data = new FormData(e.target);
      const body = `
Name: ${data.get('name')}
Project: ${data.get('projectType')}
Length: ${data.get('videoLength')}
Deadline: ${data.get('deadline')}
Budget: ${data.get('budget')}
Mood: ${selectedMood}
`;

      setTimeout(() => {
        window.location.href =
          `mailto:kailarysathwik@gmail.com?subject=Project Request&body=${encodeURIComponent(body)}`;
      }, 1200);
    });
  </script>

</body>
</html>
